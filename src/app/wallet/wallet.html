<section class="wallet-container h-full">
  <div
    class="wrapper pt-[3.5rem] flex flex-col gap-y-[5.5rem] isolate pt-[1.5rem] flex flex-col gap-[2rem] relative after:content-[''] after:w-full after:h-[20rem] after:absolute after:rounded-b-[4rem] after:bg-linear-to-br after:from-[#429690] after:to-[#2A7C76] after:z-[-1]"
  >
    <div class="top-section flex items-center justify-between text-white">
      <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center cursor-pointer"
      >
        <lucide-angular
          [img]="backButtonIcon"
          class="w-full h-full"
        ></lucide-angular>
      </button>
      <h2 class="title-text text-[2rem]">Budgeting</h2>
      <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center"
      >
        <lucide-angular [img]="bellIcon"></lucide-angular>
      </button>
    </div>
    <div
      class="wallet-details rounded-[3rem] rounded-tr-[2rem] bg-white p-[4rem_1.5rem] shadow-lg relative  flex items-center flex-col gap-[3.5rem]"
    >
      @if(!budgets.budgetOfCurrentMonth()){
      <span
        class="icon-container w-[12rem] h-[12rem] flex items-center justify-center rounded-full bg-[#e9c46a]"
      >
        <lucide-angular
          [img]="notebook"
          class="w-[75%] h-[75%] text-white flex items-center justify-center"
        ></lucide-angular>
      </span>
      <h2 class="text-[2.4rem] text-center">No budgets set.</h2>
      <button
        class="rounded-full p-[2.5rem] bg-[#438883] text-white text-[1.8rem] text-center w-full cursor-pointer"
        (click)="onOpenBudgetDialog()"
      >
        Add Budget
      </button>
      }@else {
      <button
        type="button"
        class="cursor-pointer absolute right-[1.2rem] top-[1.2rem]"
        [matMenuTriggerFor]="menu"
      >
        <span
          class="icon-container w-[2.5rem] h-[2.5rem] flex items-center justify-center"
        >
          <lucide-angular [img]="ellipsesIcon"></lucide-angular>
        </span>
      </button>
      <mat-menu #menu="matMenu" class="bg-white! rounded-xl!">
        <button
          type="button"
          mat-menu-item
          class="p-[0.5rem_1rem] text-[1.8rem]! cursor-pointer bg-white hover:bg-neutral-300"
          (click)="onEdit(budgets.budgetOfCurrentMonth())"
        >
          Edit Budget
        </button>
        <button
          type="button"
          mat-menu-item
          class="text-red-700! p-[0.5rem_1rem] text-[1.8rem]! cursor-pointer bg-white hover:bg-neutral-300"
          (click)="onDelete(budgets.budgetOfCurrentMonth().id)"
        >
          Delete Budget
        </button>
      </mat-menu>
      <div
        class="progressbar"
        [style.--progress]="`${budgetCheck.getCurrentBudgetState()}%`"
      >
        <div class="inner flex flex-col gap-[2rem] flex-wrap px-[4rem]">
          <p class="text-[1.8rem] font-medium text-center leading-[1.5]">
            <span class="text-[2.5rem]">
              {{`${budgetCheck.getCurrentBudgetState()}%`}}</span
            >
            used of
            <span class="text-[2.5rem]"
              >{{budgets.budgetOfCurrentMonth().amount}}
            </span>
          </p>
        </div>
      </div>
      <app-transactions-list [transactions]="transactions.expensesByMonth()" class="w-full" />
      }
    </div>
  </div>
</section>
