<section class="add-transaction-container h-full">
  <div
    class="wrapper pt-[3.5rem] flex flex-col gap-y-[5.5rem] isolate pt-[1.5rem] flex flex-col gap-[2rem] relative after:content-[''] after:w-full after:h-[20rem] after:absolute after:rounded-b-[5rem] after:bg-linear-to-br after:from-[#429690] after:to-[#2A7C76] after:z-[-1]"
  >
    <div class="top-section flex items-center justify-between text-white">
      <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center cursor-pointer"
        (click)="closeDialog()"
      >
        <lucide-angular
          [img]="backButtonIcon"
          class="w-full h-full"
        ></lucide-angular>
      </button>
      <h2 class="title-text text-[2rem]">
        @if(editMode()){Edit}@else{Add} Transaction
      </h2>
      <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center"
      >
        <lucide-angular [img]="ellipsesHorIcon"></lucide-angular>
      </button>
    </div>
    <form
      class="form p-[3rem_2rem] bg-white rounded-[2rem] shadow-xl"
      [formGroup]="transactionForm"
      (submit)="onTransactionSubmit()"
    >
      <div class="transaction-type flex items-center">
        <div class="grp grow flex justify-center">
          <input
            type="radio"
            name="type"
            id="expense"
            class="hidden"
            formControlName="type"
            value="expense"
          />
          <label
            for="expense"
            class="flex items-center gap-[0.8rem] text-[1.75rem] cursor-pointer"
          >
            <span class="icon-container w-[2rem] h-[2rem]">
              <lucide-angular
                [img]="checkIcon"
                class="flex items-center justify-center w-full h-full"
              ></lucide-angular>
            </span>
            Expense
          </label>
        </div>
        <div class="grp grow flex justify-center">
          <input
            type="radio"
            name="type"
            id="income"
            class="hidden"
            formControlName="type"
            value="income"
          />
          <label
            for="income"
            class="flex items-center gap-[0.8rem] text-[1.75rem] cursor-pointer"
          >
            <span class="icon-container w-[2rem] h-[2rem]">
              <lucide-angular
                [img]="checkIcon"
                class="flex items-center justify-center w-full h-full"
              ></lucide-angular>
            </span>
            Income
          </label>
        </div>
      </div>
      @if(budgetStore.getBudgets().length > 0){
      <div class="form-group select-budget">
        <select name="budget" id="budget" class="form-control" formControlName="budget_id">
          <option value="">Select Budget</option>
          @for(budget of budgetStore.getBudgets(); track budget.id){
            <option [value]="budget.id">{{budget.name}}</option>
          }
        </select>
      </div>
      }
      <div class="form-group">
        <input
          type="number"
          name="amount"
          id="amount"
          class="form-control"
          placeholder="Amount"
          formControlName="amount"
        />
        @if(amount?.touched || amount?.dirty){
        @if(amount?.hasError('required')){
        <small class="err-text text-[1.5rem]"
          >Transaction Amount Required</small
        >
        } @if(amount?.hasError('min')){
        <small class="err-text text-[1.5rem]"
          >Transaction amount must be greater than 1</small
        >
        } }
      </div>
      <div class="form-group">
        <input
          type="text"
          name="name"
          id="name"
          class="form-control"
          placeholder="Name"
          formControlName="name"
        />
        @if(name?.invalid && (name?.touched || name?.dirty)){
        @if(name?.hasError('required')){
        <small class="err-text text-[1.5rem]"
          >Transaction Name Required</small
        >
        } }
      </div>
      <div class="form-group">
        <button
          type="button"
          class="form-control text-left cursor-pointer"
          (click)="showDateDialog()"
        >
          {{today | date}}
        </button>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn">
          @if(editMode()){Update}@else{Add}
        </button>
      </div>
    </form>
  </div>
</section>
