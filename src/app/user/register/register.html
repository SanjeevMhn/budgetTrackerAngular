<div class="wrapper h-screen bg-[#438883]">
  <div
    class="inner flex flex-col justify-center gap-y-[1.4rem] w-full my-auto h-[80%]"
  >
    <header class="flex flex-col gap-[1.2rem] text-white items-center">
      <h2 class="text-[2.8rem] font-semibold">Budget Tracker</h2>
      <p class="text-[1.8rem] font-medium">Spend Smarter, Save More</p>
    </header>

    @if(userRegisterState() == 'name'){
    <div
      class="icon-container w-[40%] aspect-square flex items-center justify-center rounded-full bg-[#e9c46a] mx-auto shadow-2xl"
    >
      <lucide-icon
        [img]="walletIcon"
        class="w-[75%] h-[75%] text-white flex items-center justify-center"
      ></lucide-icon>
    </div>
    <form (submit)="onUserNameSubmit()" [formGroup]="userNameForm" class="form" autocomplete="off">
      <div class="form-group">
        <!-- <label for="name" class="form-label text-white!">Name</label> -->
        <input
          type="text"
          name="name"
          id="name"
          class="form-control bg-white!"
          placeholder="Your Name"
          formControlName="name"
          [class]="name?.hasError('required') ? 'border border-red-500' : ''"
        />
        @if(name?.invalid && (name?.touched || name?.dirty)){
        @if(name?.hasError('required')){
        <span class="err-text text-[1.4rem] font-normal"
          >User Name Required</span
        >
        } @if(name?.hasError('minlength')){
        <span class="err-text text-[1.4rem] font-normal"
          >User Name Must be atleast 3 characters</span
        >
        } }
      </div>
      <div class="form-action">
        <button
          type="submit"
          class="w-full rounded-full bg-[#56b6ac] text-white shadow-2xl p-[1.5rem] text-[1.8rem] text-center cursor-pointer"
        >
          Next
        </button>
      </div>
    </form>
    } @if(userRegisterState() == 'img'){
    <form (submit)="onUserImgSubmit()" [formGroup]="userNameForm" class="form" autocomplete="off">
      <div class="form-group relative">
        <label
          for="img"
          class="img-container w-[40%] aspect-square flex items-center justify-center rounded-full bg-[#e9c46a] mx-auto shadow-2xl bg-[#e9c46a] cursor-pointer overflow-hidden relative"
        >
          @if(userImg() !== ''){
          <img
            src="{{userImg()}}"
            class="w-full h-full object-cover"
            alt=""
            srcset=""
          />

          }@else{
          <p
            class="text-[1.8rem] p-[1.5rem] text-white leading-[1.2] text-center"
          >
            Upload Profile Image
          </p>
          }
          <input
            type="file"
            name="img"
            id="img"
            class="hidden"
            (change)="onImgUpload($event)"
          />
        </label>
        @if(userImg() !== ''){
        <button
          class="remove-img w-[10%] aspect-square flex items-center justify-center rounded-full bg-neutral-400 absolute bottom-0 right-[30%] border-2 border-white cursor-pointer"
          type="button"
          (click)="userImg.set('')"
        >
          <lucide-angular
            [img]="deleteIcon"
            class="w-[75%] h-[75%] text-white flex items-center justify-center m-auto"
          ></lucide-angular>
        </button>
        }
      </div>
      <div class="form-action pt-[1.5rem]">
        <button
          type="submit"
          class="w-full rounded-full bg-[#56b6ac] text-white shadow-2xl p-[1.5rem] text-[1.8rem] text-center cursor-pointer"
          (click)="userRegisterState.set('password')"
        >
          @if(userImg() == ''){ Skip }@else{ Next }
        </button>
      </div>
    </form>
    } @if(userRegisterState() == 'password'){
    <div
      class="icon-container w-[40%] aspect-square flex items-center justify-center rounded-full bg-[#e9c46a] mx-auto shadow-2xl"
    >
      <lucide-icon
        [img]="lockIcon"
        class="w-[75%] h-[75%] text-white flex items-center justify-center"
      ></lucide-icon>
    </div>
    <form
      (submit)="onPasswordSubmit()"
      [formGroup]="userPasswordForm"
      class="form"
      autocomplete="off"
    >
      <div class="form-group">
        <label for="password" class="form-label text-white!">Password</label>
        <!-- @for(input of [0,1,2,3,4,5]; track input){ -->
        <input
          type="password"
          name=""
          id=""
          class="form-control bg-white w-full"
          placeholder="6 digit passcode"
          formControlName="password"
        />
        @if(password?.invalid && (password?.touched || password?.dirty)){
        @if(password?.hasError('minlength')){
        <span class="err-text text-[1.4rem]"
          >Passcode must be 6 digits or more</span
        >
        } @if(password?.hasError('pattern')){
        <span class="err-text text-[1.4rem]"
          >Invalid passcode.(Should be numbers)</span
        >
        } }
      </div>
      <div class="form-action flex flex-row-reverse gap-[0.8rem]">
        @if(password?.value){
        <button
          type="submit"
          class="w-full rounded-full bg-[#56b6ac] text-white shadow-2xl p-[1.5rem] text-[1.8rem] text-center cursor-pointer"
        >
          Done
        </button>
        }@else{
        <button
          type="button"
          class="w-full rounded-full border-2 border-[#56b6ac] text-white bg-transparent shadow-2xl p-[1.5rem] text-[1.8rem] text-center cursor-pointer"
          (click)="onPasswordSkip()"
        >
          Skip
        </button>
        }
      </div>
    </form>
    }
  </div>
</div>
