<section class="statistic-container h-full">
  <div class="wrapper pt-[3.5rem] flex flex-col gap-y-[2rem]">
    <div class="top-section flex items-center justify-between">
      <!-- <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center cursor-pointer"
      >
        <lucide-angular
          [img]="backButtonIcon"
          class="w-full h-full"
        ></lucide-angular>
      </button> -->
      <h2 class="title-text text-[2rem]">Transactions History</h2>
      <!-- <button
        type="button"
        class="w-[2.5rem] h-[2.5rem] flex items-center justify-center"
      >
        <lucide-angular [img]="downloadIcon"></lucide-angular>
      </button> -->
    </div>
    <ul
      class="tab-list flex items-center justify-evenly gap-[0.5rem] flex-wrap"
    >
      @for(tab of tabList(); track tab.id){
      <li class="tab">
        <button
          class="flex items-center justify-center rounded-xl p-[1rem] min-w-[9rem] cursor-pointer"
          [class]="tab.active ? 'bg-[#438883] text-white' : 'text-neutral-700'"
          type="button"
          (click)="toggleActiveTab(tab.id)"
        >
          {{tab.name}}
        </button>
      </li>
      }
    </ul>

    <!-- <div class="chart-container p-[1.5rem] rounded-xl bg-white shadow-md flex justify-center">
      <canvas class="w-full!" #chart></canvas>
    </div> -->
    <div class="dropdown-container flex items-center justify-end">
      <select
        name=""
        id=""
        class="p-[0.5rem_1.2rem] border border-neutral-500 rounded-xl text-neutral-500 text-[1.8rem]"
        [value]="selectedOption()"
        (change)="handleOptionChange($event)"
      >
        <option value="exp">Expense</option>
        <option value="inc">Income</option>
      </select>
    </div>
    <div
      class="card-section p-[1rem] bg-white rounded-2xl min-h-[15rem] flex flex-col gap-[2rem] shadow-md"
    >
      <div class="header flex items-center gap-[1.2rem] justify-between flex-wrap">
        <h2 class="header-text text-[1.65rem] font-medium">
          Top {{selectedOption() == 'exp' ? 'Spendings' : 'Earnings'}}
        </h2>
        <div class="form-group relative flex grow">
          <input type="text" name="" id="" [class]="searchInputHasValue ? 'p-[0.8rem]! border-r-0 rounded-tl-md rounded-bl-md' : 'rounded-md'" class="form-control w-full p-[0.8rem_3rem_0.8rem_0.8rem] border border-neutral-400 text-[1.4rem]" placeholder="Search..." (input)="searchTransactions($event)" #searchInput />
          @if(searchInputHasValue){
           <button type="button" class="flex items-center justify-center flex-[0_0_3.5rem] h-[3.5rem] w-[3.5rem] border border-l-0 border-neutral-400 rounded-tr-md rounded-br-md" (click)="clearSearchInput()">
            <lucide-angular
              [img]="clearIcon"
              class="w-[1.8rem] h-[1.8rem] flex items-center justify-center"
            ></lucide-angular>
           </button> 
          }@else{
            <span class="w-[1.5rem] h-[1.5rem] flex items-center justify-center absolute top-[50%] translate-y-[-50%] right-[1.2rem]">
              <lucide-angular
                [img]="searchIcon"
                class="w-full h-full flex items-center justify-center"
              ></lucide-angular>
            </span>
          }
        </div>

        <!-- <span class="see-all text-[1.4rem] text-neutral-500">See All</span> -->
      </div>
      <app-transactions-list [transactions]="activeTransactionType()" />
    </div>
  </div>
</section>
